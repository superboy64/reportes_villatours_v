!function(t,r){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],function(e){return r(e,t.document)}):"object"==typeof module&&module.exports?module.exports=function(e,t){return e||(e=window),void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),require("./grid.base"),require("./jquery.fmatter"),require("./grid.common"),r(t,e.document),t}:r(jQuery,t.document)}("undefined"!=typeof window?window:this,function(X,K){"use strict";var Y=X.jgrid,Z=Y.jqID,c=X.fn.jqGrid,ee=c.getGuiStyles,t=c.getGridRes;Y.extend({getColProp:function(e){var t,r=this[0];return null!=r&&r.grid&&void 0!==(t=r.p.iColByName[e])?r.p.colModel[t]:{}},setColProp:function(r,a){return this.each(function(){var e,t=this.p;this.grid&&null!=t&&a&&void 0!==(e=t.iColByName[r])&&X.extend(!0,t.colModel[e],a)})},sortGrid:function(d,c,u){return this.each(function(){var e,t,r,a=this,i=a.grid,o=a.p,l=o.colModel,s=l.length,n=!1;if(i)for(d||(d=o.sortname),"boolean"!=typeof c&&(c=!1),t=0;t<s;t++)if((e=l[t]).index===d||e.name===d){!0===o.frozenColumns&&!0===e.frozen&&(n=i.fhDiv.find("#"+Z(o.id+"_"+d))),n&&0!==n.length||(n=i.headers[t].el),("boolean"!=typeof(r=e.sortable)||r)&&a.sortData(e.index||e.name,t,c,u,n);break}})},clearBeforeUnload:function(){return this.each(function(){var e,t=this,r=t.p,a=t.grid,i=Y.clearArray,o=Object.prototype.hasOwnProperty;X.isFunction(a.emptyRows)&&a.emptyRows.call(t,!0,!0),X(K).off("mousemove.jqGrid mouseup.jqGrid"+r.id),X(t).off();var l,s=a.headers.length;for(l=0;l<s;l++)a.headers[l].el=null;for(e in a)a.hasOwnProperty(e)&&(a.propOrMethod=null);var n=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"];for(s=n.length,l=0;l<s;l++)o.call(t,n[l])&&(t[n[l]]=null);t._index={},i(r.data),i(r.lastSelectedData),i(r.selarrrow),i(r.savedRow),r.editingInfo={}})},GridDestroy:function(){return this.each(function(){var e=this,t=e.p;if(e.grid&&null!=t){t.pager&&X(t.pager).remove();try{X("#alertmod_"+Z(t.id)).remove(),X(e).jqGrid("clearBeforeUnload"),X(t.gBox).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){var e=this,t=X(e),r=e.p,a=X.fn.jqGrid;e.grid&&(t.removeClass(a.getGuiStyles.call(t,"grid","ui-jqgrid-btable")),r.pager&&(r.pager.substr(1,X.jgrid.uidPref.length)===X.jgrid.uidPref?X(r.pager).remove():X(r.pager).empty().removeClass(a.getGuiStyles.call(t,"pager.pager","ui-jqgrid-pager "+a.getGuiStyles.call(t,"bottom"))).removeAttr("style").removeAttr("dir")),t.jqGrid("clearBeforeUnload"),t.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),t.empty(),t.insertBefore(r.gBox).show(),X(r.pager).insertBefore(r.gBox).show(),X(r.gBox).remove())})},setGridState:function(d){return this.each(function(){var t=this,e=t.p,r=t.grid,a=r.cDiv,i=X(r.uDiv),o=X(r.ubDiv);if(r&&null!=e){var l=function(e){return c.getIconRes.call(t,"gridMinimize."+e)},s=l("visible"),n=l("hidden");"hidden"===d?(X(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",e.gView).slideUp("fast"),e.pager&&X(e.pager).slideUp("fast"),e.toppager&&X(e.toppager).slideUp("fast"),!0===e.toolbar[0]&&("both"===e.toolbar[1]&&o.slideUp("fast"),i.slideUp("fast")),e.footerrow&&X(".ui-jqgrid-sdiv",e.gBox).slideUp("fast"),X(".ui-jqgrid-titlebar-close span",a).removeClass(s).addClass(n),e.gridstate="hidden"):"visible"===d&&(X(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",e.gView).slideDown("fast"),e.pager&&X(e.pager).slideDown("fast"),e.toppager&&X(e.toppager).slideDown("fast"),!0===e.toolbar[0]&&("both"===e.toolbar[1]&&o.slideDown("fast"),i.slideDown("fast")),e.footerrow&&X(".ui-jqgrid-sdiv",e.gBox).slideDown("fast"),X(".ui-jqgrid-titlebar-close span",a).removeClass(n).addClass(s),e.gridstate="visible")}})},filterToolbar:function(e){return this.each(function(){var F=this,f=F.grid,O=X(F),T=F.p,k=Y.info_dialog,_=Y.htmlEncode;if(!this.ftoolbar){var R,I=X.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:T.prmNames.filters,stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},Y.search,T.searching||{},e||{}),b=T.colModel,V=function(e){return t.call(O,e)},H=V("errors.errcap"),A=V("edit.bClose"),B=V("edit.msg"),M=ee.call(F,"states.hover"),y=ee.call(F,"states.select"),P=ee.call(F,"filterToolbar.dataField"),N={},E=function(e){var t="gs_";switch(I.idMode){case"compatibility":t+=T.idPrefix;break;case"new":t+=T.id+"_"}return t+e},m=function(e){return"#"+Z(E(e))},g=function(e){var t=(e.value||"").split(":");return{on:t[0]||"on",off:t[1]||"off"}},c=function(e){var t,r,a,i,o,l,s=T.postData[I.sFilter],n={},d=T.iColByName;if(e)for(r=0;r<b.length;r++)!1!==(o=b[r]).search&&(l=o.searchoptions||{},n[o.name]={op:l.sopt?l.sopt[0]:"select"===o.stype||"checkbox"===o.stype?"eq":I.defaultSearch,data:void 0!==l.defaultValue?l.defaultValue:""});if(!s||!T.search)return n;if("string"==typeof s)try{s=X.parseJSON(s)}catch(e){s={}}else s=s||{};if(a=s.rules||{},null==s||null!=s.groupOp&&null!=I.groupOp&&s.groupOp.toUpperCase()!==I.groupOp.toUpperCase()||null==a||0===a.length||null!=s.groups&&0<s.groups.length)return n;for(r=0;r<a.length;r++)for(i=a[r],o=b[d[i.field]],t=0;t<b.length;t++)if(((o=b[t]).index||o.name)===i.field&&!1!==o.search){if((l=o.searchoptions||{}).sopt){if(X.inArray(i.op,l.sopt)<0)continue}else if("select"===o.stype||"checkbox"===o.stype){if("eq"!==i.op)continue}else if(i.op!==I.defaultSearch)continue;n[o.name]={op:i.op,data:i.data}}return n},U=function(e,t){switch(t){case 1:e.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:e.data("state",0).prop({checked:!1,indeterminate:!1});break;default:e.data("state",-1).prop({checked:!1,indeterminate:!0})}},L=function(){var u={},h=0,p={};X.each(b,function(){var e,t,a=this,r=a.index||a.name,i=a.searchoptions||{},o=X(m(a.name),!0===a.frozen&&!0===T.frozenColumns?f.fhDiv:f.hDiv),l=function(e,t){var r=a.formatoptions||{};return void 0!==r[e]?r[e]:V("formatter."+(t||a.formatter)+"."+e)},s=function(e){var t=l("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return e.replace(new RegExp(t,"g"),"")};if(t=I.searchOperators?o.parent().prev().children("a").data("soper")||I.defaultSearch:i.sopt?i.sopt[0]:"select"===a.stype||"checkbox"===a.stype?"eq":I.defaultSearch,"custom"===a.stype&&X.isFunction(i.custom_value)&&0<o.length&&"SPAN"===o[0].nodeName.toUpperCase())e=i.custom_value.call(F,o.children(".customelement").first(),"get");else if("select"===a.stype)e=o.prop("multiple")?null==(e=o.val())||0===e.length?"":e.join(T.inFilterSeparator||","):o.val();else if("checkbox"===a.stype){var n=g(i);switch(o.data("state")){case-1:e="";break;case 0:e=n.off;break;default:e=n.on}}else switch(e=X.trim(o.val()),a.formatter){case"integer":""!==(e=s(e).replace(l("decimalSeparator","number"),"."))&&(e=String(parseInt(e,10)));break;case"number":""!==(e=s(e).replace(l("decimalSeparator"),"."))&&"0"===String(e).charAt(0)&&(e=String(parseFloat(e)));break;case"currency":var d=l("prefix"),c=l("suffix");d&&d.length&&e.substr(0,d.length)===d&&(e=e.substr(d.length)),c&&c.length&&e.length>c.length&&e.substr(e.length-c.length,c.length)===c&&(e=e.substr(0,e.length-c.length)),""!==(e=s(e).replace(l("decimalSeparator"),"."))&&(e=String(parseFloat(e)))}if(e||"nu"===t||"nn"===t||0<=X.inArray(t,T.customUnaryOperations))u[r]=e,p[r]=t,h++;else if(u.hasOwnProperty(r)&&delete u[r],!I.stringResult&&!I.searchOperators&&"local"!==T.datatype)try{null!=T.postData&&T.postData.hasOwnProperty(r)&&delete T.postData[r]}catch(e){}});var e,t=0<h;if(I.stringResult||I.searchOperators||"local"===T.datatype){var r='{"groupOp":"'+I.groupOp+'","rules":[',a=0;X.each(u,function(e,t){0<a&&(r+=","),r+='{"field":"'+e+'",',r+='"op":"'+p[e]+'",',r+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',a++}),r+="]}",T.postData[I.sFilter]=r,X.each([I.sField,I.sValue,I.sOper],function(e,t){T.postData.hasOwnProperty(t)&&delete T.postData[t]})}else X.extend(T.postData,u);T.searchurl&&(e=T.url,O.jqGrid("setGridParam",{url:T.searchurl}));var i="stop"===O.triggerHandler("jqGridToolbarBeforeSearch");!i&&X.isFunction(I.beforeSearch)&&(i=I.beforeSearch.call(F)),i||O.jqGrid("setGridParam",{search:t}).trigger("reloadGrid",[X.extend({page:1},I.reloadGridSearchOptions||{})]),e&&O.jqGrid("setGridParam",{url:e}),O.triggerHandler("jqGridToolbarAfterSearch"),X.isFunction(I.afterSearch)&&I.afterSearch.call(F)},W=V("search.odata")||[],$=T.customSortOperations,J=[],Q=X("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});I.loadFilterDefaults&&(N=c()||{}),X.each(b,function(e){var c,t,r,a,i,o,l,s=this,u="filter",n=s.searchoptions||{},d=s.editoptions||{},h=X("<th></th>",{class:ee.call(F,"colHeaders","ui-th-column ui-th-"+T.direction+" "+(I.applyLabelClasses&&s.labelClasses||"")),role:"gridcell","aria-describedby":T.id+"_"+s.name}),p=X("<div></div>"),f=X("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),m=f.children("tbody").children("tr").children("td"),g=m.eq(0),v=m.eq(1),b=m.eq(2);if(!0===this.hidden&&h.css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),c=X.extend({mode:u,name:s.name,cm:s,iCol:e,id:E(s.name)},n),this.search){if(I.searchOperators){for(a=T.search&&null!=N[this.name]?N[this.name].op:c.sopt?c.sopt[0]:"select"===s.stype||"checkbox"===s.stype?"eq":I.defaultSearch,i=0;i<W.length;i++)if(W[i].oper===a){r=I.operands[a]||"";break}var y;if(void 0===r&&null!=$)for(y in $)if($.hasOwnProperty(y)&&y===a){r=$[y].operand;break}void 0===r&&(r="="),g.append("<a title='"+(null!=c.searchtitle?c.searchtitle:V("search.operandTitle"))+"' data-soper='"+a+"' class='"+ee.call(F,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+_(r)+"</a>")}if(g.data("colindex",e),null!=c.sopt&&1!==c.sopt.length||g.hide(),T.search&&null!=N[this.name]&&(c.defaultValue=N[this.name].data),void 0===c.clearSearch&&(c.clearSearch="text"===this.stype),c.clearSearch){var w=X.isFunction(I.resetTitle)?I.resetTitle.call(F,{options:I,cm:s,cmName:s.name,iCol:e}):(V("search.resetTitle")||"Clear Search Value")+" "+Y.stripHtml(T.colNames[e]);b.append("<a title='"+w+"' aria-label='"+w+"' class='"+ee.call(F,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+I.resetIcon+"</span></a>")}else b.hide();switch(p.append(f),this.stype){case"checkbox":var C=void 0!==c.defaultValue?c.defaultValue:"-1";l=X("<input role='search' type='checkbox' class='"+P+"' name='"+(s.index||s.name)+"' id='"+E(s.name)+"' aria-labelledby='jqgh_"+T.id+"_"+s.name+"' data-state='"+C+"'/>"),"-1"===C?l.prop("indeterminate",!0):"1"===C&&l.prop("checked",!0),l.click(function(){var e=X(this);switch(e.data("state")){case-1:U(e,1);break;case 0:U(e,-1);break;default:U(e,0)}!0===I.autosearch&&L()}),v.append(l),c.attr&&l.attr(c.attr),J.push({elem:l[0],options:c});break;case"select":var q,j,D;if(t=this.surl||c.dataUrl)X.ajax(X.extend({url:t,context:{$tdInput:v,options:c,cm:s,iCol:e},dataType:"html",success:function(e,t,r){var a,i,o,l=this.cm,s=this.iCol,n=this.options,d=this.$tdInput;void 0!==n.buildSelect?(a=n.buildSelect.call(F,e,r,l,s))&&d.append(a):d.append(e),(o=d.children("select")).attr({name:l.index||l.name,id:E(l.name)}),n.attr&&o.attr(n.attr),o.addClass(P),o.css({width:"100%"}),0===o.find("option[value='']").length&&"string"==typeof c.noFilterText&&((i=K.createElement("option")).value="",i.innerHTML=c.noFilterText,o.prepend(i),null!=X(o[0].options[o[0].selectedIndex]).attr("selected")||o[0].multiple||(o[0].selectedIndex=0)),o[0].multiple&&0===o.find("option[selected]").length&&-1!==o[0].selectedIndex&&(o[0].options[o[0].selectedIndex].selected=!1),void 0!==n.defaultValue&&o.val(n.defaultValue),Y.bindEv.call(F,o[0],n),Y.fullBoolFeedback.call(F,n.selectFilled,"jqGridSelectFilled",{elem:o[0],options:n,cm:l,cmName:l.name,iCol:s,mode:u}),!0===I.autosearch&&o.change(function(){return L(),!1})}},Y.ajaxOptions,T.ajaxSelectOptions||{}));else if(s.searchoptions?(q=void 0===n.value?d.value||"":n.value,j=void 0===n.separator?d.separator||":":n.separator,D=void 0===n.delimiter?d.delimiter||";":n.delimiter):s.editoptions&&(q=void 0===d.value?"":d.value,j=void 0===d.separator?":":d.separator,D=void 0===d.delimiter?";":d.delimiter),n.generateValue&&null!=T.indexByColumnData[s.name]&&(q=F.generateValueFromColumnIndex(s.name,j,D)),q){if((o=K.createElement("select")).style.width="100%",l=X(o).attr({name:s.index||s.name,role:"search",id:E(s.name),"aria-describedby":T.id+"_"+s.name}),c.attr&&l.attr(c.attr),!Y.fillSelectOptions(o,q,j,D,null!=c.attr&&c.attr.multiple)&&"string"==typeof c.noFilterText){var x=K.createElement("option");x.value="",x.innerHTML=c.noFilterText,x.selected=!0,l.prepend(x)}void 0!==c.defaultValue&&l.val(c.defaultValue),l.addClass(P),J.push({elem:o,options:c}),v.append(o),Y.fullBoolFeedback.call(F,c.selectFilled,"jqGridSelectFilled",{elem:o,options:s.searchoptions||d,cm:s,cmName:s.name,iCol:e,mode:u}),!0===I.autosearch&&l.change(function(){return L(),!1})}break;case"text":if(l=X("<input role='search' type='text' class='"+P+"' name='"+(s.index||s.name)+"' id='"+E(s.name)+"' aria-labelledby='jqgh_"+T.id+"_"+s.name+"' value='"+(void 0!==c.defaultValue?c.defaultValue:"")+"'/>"),v.append(l),s.createColumnIndex&&c.generateDatalist){var G="dl_"+E(s.name),S=O.jqGrid("generateDatalistFromColumnIndex",s.name);null!=S&&0<S.length&&(l.attr("list",G),v.append(S.attr("id",G)))}c.attr&&l.attr(c.attr),J.push({elem:l[0],options:c}),!0===I.autosearch&&(I.searchOnEnter?l.keypress(function(e){return 13===(e.charCode||e.keyCode||0)?(L(),!1):this}):l.keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:R&&clearTimeout(R),R=setTimeout(function(){L()},I.autosearchDelay)}}));break;case"custom":v.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(s.index||s.name)+"' id='"+E(s.name)+"'/>");try{if(!X.isFunction(c.custom_element))throw"e1";var z=c.custom_element.call(F,void 0!==c.defaultValue?c.defaultValue:"",c);if(!z)throw"e2";z=X(z).addClass("customelement"),p.find("span[name='"+(s.index||s.name)+"']").append(z)}catch(e){"e1"===e&&k.call(F,H,"function 'custom_element' "+B.nodefined,A),"e2"===e?k.call(F,H,"function 'custom_element' "+B.novalue,A):k.call(F,H,"string"==typeof e?e:e.message,A)}}}h.append(p),h.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){X(this).addClass(M)},function(){X(this).removeClass(M)}),Q.append(h),I.searchOperators||g.hide()}),X(f.hDiv).find(">div>.ui-jqgrid-htable>thead").append(Q),X.each(J,function(){Y.bindEv.call(F,this.elem,this.options)}),I.searchOperators&&(X(".soptclass",Q).click(function(e){var t=X(this).offset();!function(a,e,t){X("#sopt_menu").remove(),e=parseInt(e,10),t=parseInt(t,10)+18;var r,i,o=0,l=[],s=X(a).data("soper"),n=X(a).data("colname"),d=X(".ui-jqgrid-view").css("font-size")||"11px",c="<ul id='sopt_menu' class='"+ee.call(F,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+d+";left:"+e+"px;top:"+t+"px;'>";if(void 0!==(o=T.iColByName[n])){var u,h,p,f,m,g=b[o],v=X.extend({},g.searchoptions);for(v.sopt||(v.sopt=[],v.sopt[0]="select"===g.stype||"checkbox"===g.stype?"eq":I.defaultSearch),X.each(W,function(){l.push(this.oper)}),null!=$&&X.each($,function(e){l.push(e)}),o=0;o<v.sopt.length;o++)p=v.sopt[o],-1!==(i=X.inArray(p,l))&&(void 0!==(u=W[i])?(f=I.operands[p],m=u.text):null!=$&&(f=(h=$[p]).operand,m=h.text),r=s===p?y:"",c+='<li class="'+ee.call(F,"searchToolbar.menuItem","ui-jqgrid-menu-item "+r)+'" role="presentation"><a class="'+ee.call(F,"searchToolbar.menuItemButton","g-menu-item")+'" tabindex="0" role="menuitem" value="'+_(p)+'" data-oper="'+_(f)+'"><table><tr><td style="width:25px">'+_(f)+"</td><td>"+_(m)+"</td></tr></table></a></li>");c+="</ul>",X("body").append(c),X("#sopt_menu > li > a").hover(function(){X(this).addClass(M)},function(){X(this).removeClass(M)}).click(function(){var e=X(this).attr("value"),t=X(this).data("oper");if(O.triggerHandler("jqGridToolbarSelectOper",[e,t,a]),X("#sopt_menu").hide(),X(a).data("soper",e).text(t),!0===I.autosearch){var r=X(a).parent().next().children()[0];(X(r).val()||"nu"===e||"nn"===e||0<=X.inArray(e,T.customUnaryOperations))&&L()}})}}(this,t.left,t.top),e.stopPropagation()}),X("body").on("click",function(e){"soptclass"!==e.target.className&&X("#sopt_menu").hide()})),X(".clearsearchclass",Q).click(function(){var e,t,r=X(this).closest(".ui-search-clear"),a=r.siblings(".ui-search-oper"),i=a.children("a"),o=i.data("soper"),l=parseInt(a.data("colindex"),10),s=r.siblings(".ui-search-input"),n=b[l],d=X.extend({},n.searchoptions||{}),c=d.defaultValue||"";switch(n.stype){case"select":c?s.find("select").val(c):s.find("select")[0].selectedIndex=0;break;case"checkbox":U(s.find("input[type=checkbox]"),-1);break;default:s.find("input").val(c)}("nu"===o||"nn"===o||0<=X.inArray(o,T.customUnaryOperations))&&(e=d.sopt?d.sopt[0]:"select"===n.stype||"checkbox"===n.stype?"eq":I.defaultSearch,t=null!=$&&null!=$[e]?$[e].operand:I.operands[e]||"",i.data("soper",e).text(t)),!0===I.autosearch&&L()}),F.ftoolbar=!0,F.triggerToolbar=L,F.clearToolbar=function(e){var o,l={},s=0;e="boolean"!=typeof e||e,X.each(b,function(){var t,r,e=this,a=X(m(e.name),!0===e.frozen&&!0===T.frozenColumns?f.fhDiv:f.hDiv),i=e.searchoptions||{};switch(void 0!==i.defaultValue&&(t=i.defaultValue),o=e.index||e.name,e.stype){case"checkbox":U(a,-1);break;case"select":if(r=!(0<a.length&&a[0].multiple),a.find("option").each(function(e){if(this.selected=0===e&&r,X(this).val()===t)return!(this.selected=!0)}),void 0!==t)l[o]=t,s++;else try{delete T.postData[o]}catch(e){}break;case"text":if(a.val(t||""),void 0!==t)l[o]=t,s++;else try{delete T.postData[o]}catch(e){}break;case"custom":X.isFunction(i.custom_value)&&0<a.length&&"SPAN"===a[0].nodeName.toUpperCase()&&(void 0===t&&(t=""),i.custom_value.call(F,a.children(".customelement").first(),"set",t))}});var t,r=0<s;if(T.resetsearch=!0,I.stringResult||I.searchOperators||"local"===T.datatype){var a='{"groupOp":"'+I.groupOp+'","rules":[',i=0;X.each(l,function(e,t){0<i&&(a+=","),a+='{"field":"'+e+'",',a+='"op":"eq",',a+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',i++}),a+="]}",T.postData[I.sFilter]=a,X.each([I.sField,I.sValue,I.sOper],function(e,t){T.postData.hasOwnProperty(t)&&delete T.postData[t]})}else X.extend(T.postData,l);T.searchurl&&(t=T.url,O.jqGrid("setGridParam",{url:T.searchurl}));var n="stop"===O.triggerHandler("jqGridToolbarBeforeClear");!n&&X.isFunction(I.beforeClear)&&(n=I.beforeClear.call(F)),n||e&&O.jqGrid("setGridParam",{search:r}).trigger("reloadGrid",[X.extend({page:1},I.reloadGridResetOptions||{})]),t&&O.jqGrid("setGridParam",{url:t}),O.triggerHandler("jqGridToolbarAfterClear"),X.isFunction(I.afterClear)&&I.afterClear.call(F)},F.toggleToolbar=function(){var e=X("tr.ui-search-toolbar",f.hDiv),t=!0===T.frozenColumns&&X("tr.ui-search-toolbar",f.fhDiv);"none"===e.css("display")?(e.show(),t&&t.show()):(e.hide(),t&&t.hide()),!0===T.frozenColumns&&(O.jqGrid("destroyFrozenColumns"),O.jqGrid("setFrozenColumns"))},!0===T.frozenColumns&&(O.jqGrid("destroyFrozenColumns"),O.jqGrid("setFrozenColumns")),O.on("jqGridRefreshFilterValues.filterToolbar"+(I.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var e,t,r,a,i,o,l,s=c(!0)||{};if(I.stringResult||I.searchOperators||"local"===T.datatype||!T.search){for(e in s)if(s.hasOwnProperty(e)&&(t=s[e],o=(r=X(m(e))).closest("th.ui-th-column"),0<r.length&&0<o.length)){if(l=(T.colModel[o[0].cellIndex]||{}).searchoptions||{},"SELECT"===r[0].tagName.toUpperCase()&&r[0].multiple)r.val(t.data.split(T.inFilterSeparator||","));else if(r.is("input[type=checkbox]")){var n=g(l);U(r,t.data===n.on?1:t.data===n.off?0:-1)}else if(0<r.find(".customelement").length&&X.isFunction(l.custom_value)){var d=l.custom_value.call(F,r.find(".customelement").first(),"get");""===t.data&&void 0!==l.defaultValue&&(t.data=l.defaultValue),void 0===d&&(d=""),t.data!==d&&String(t.data)!==String(d)&&l.custom_value.call(F,r.find(".customelement").first(),"set",t.data)}else""===t.data&&void 0!==l.defaultValue&&(t.data=l.defaultValue),X.trim(r.val())!==String(t.data)&&r.val(t.data);(a=r.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass")).data("soper",t.op),a.text(I.operands[t.op]||(T.customSortOperations[t.op]||{}).operand)}for(i=0;i<T.colModel.length;i++)e=T.colModel[i].name,s.hasOwnProperty(e)||X(m(e)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){var e=this;e.ftoolbar&&(e.triggerToolbar=null,e.clearToolbar=null,e.toggleToolbar=null,e.ftoolbar=!1,X(e.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===e.p.frozenColumns&&X(e).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(c){return void 0===c&&(c=!0),this.each(function(){var e,t,r,a,i,o=this.grid,l=this.p.colModel,s=X("table.ui-jqgrid-htable thead",o.hDiv);if(o){X(this).off(".setGroupHeaders");var n=X("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),d=o.headers;for(e=0,t=d.length;e<t;e++){i=l[e].hidden?"none":"",r=X(d[e].el).width(d[e].width).css("display",i);try{r.removeAttr("rowSpan")}catch(e){r.attr("rowSpan",1)}n.append(r),0<(a=r.children("span.ui-jqgrid-resize")).length&&(a[0].style.height=""),r.children("div")[0].style.top=""}X(s).children("tr.ui-jqgrid-labels").remove(),X(s).prepend(n),!0===c&&X(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(S){return S=X.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},S||{}),this.each(function(){this.p.groupHeader=S;var e,t,r,a,i,o,l,s,n,d,c,u,h,p,f=this,m=0,g=f.p,v=g.colModel,b=v.length,y=f.grid.headers,w=X("table.ui-jqgrid-htable",f.grid.hDiv),C=Y.isCellClassHidden,q=w.children("thead").children("tr.ui-jqgrid-labels"),j=q.last().addClass("jqg-second-row-header"),D=w.children("thead"),x=w.find(".jqg-first-row-header");void 0===x[0]?x=X("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):x.empty();var G=function(e,t){var r;for(r=0;r<t.length;r++)if(t[r].startColumnName===e)return t[r];return 0};for(X(f).prepend(D),r=X("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),e=0;e<b;e++)if(i=y[e].el,o=X(i),t=v[e],l={height:"0",width:y[e].width+"px",display:t.hidden?"none":""},X("<th>",{role:"gridcell"}).css(l).addClass("ui-first-th-"+g.direction+(S.applyLabelClasses?" "+(t.labelClasses||""):"")).appendTo(x),i.style.width="",p=ee.call(f,"colHeaders","ui-th-column-header ui-th-"+g.direction+" "+(S.applyLabelClasses&&t.labelClasses||"")),n=G(t.name,S.groupHeaders)){for(d=n.numberOfColumns,c=n.titleText,s=u=0;s<d&&e+s<b;s++)v[e+s].hidden||C(v[e+s].classes)||u++;a=X("<th>").addClass(p).html(c||"&nbsp;"),0<u&&a.attr("colspan",String(u)),g.headertitles&&a.attr("title",a.text()),0===u&&a.hide(),o.before(a),r.append(i),m=d-1}else 0===m?S.useColSpanStyle?o.attr("rowspan",q.length+1):(X("<th>").addClass(p).css({display:t.hidden?"none":"","border-top":"0 none"}).insertBefore(o),r.append(i)):(r.append(i),m--);(h=X(f).children("thead")).prepend(x),r.insertAfter(j),w.prepend(h),X(f).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var e=this;if(0===e.length)return 0;var t,r=(e=e[0]).p.colModel,a=r.length,i=-1;for(t=0;t<a&&!0===r[t].frozen;t++)i=t;return i+1},setFrozenColumns:function(z){return z=z||{},this.each(function(){var r=this,i=X(r),v=r.p,o=r.grid;if(o&&null!=v&&!0!==v.frozenColumns){var b,e,t=v.colModel,a=t.length,l=-1,s=!1,n=[],d=Z(v.id),c=ee.call(r,"states.hover");if(!0!==v.subGrid&&!0!==v.treeGrid&&!v.scroll){for(b=0;b<a&&!0===t[b].frozen;b++)s=!0,l=b,n.push("#jqgh_"+d+"_"+Z(t[b].name));if(v.sortable){e=X(o.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");try{e.sortable("destroy")}catch(e){}i.jqGrid("setGridParam",{sortable:{options:{items:0<n.length?">th:not(:has("+n.join(",")+"),:hidden)":">th:not(:hidden)"}}}),i.jqGrid("sortableColumns",e)}if(0<=l&&s){var u=v.caption?X(o.cDiv).outerHeight():0,h=X(".ui-jqgrid-htable",v.gView).height();v.toppager&&(u+=X(o.topDiv).outerHeight()),!0===v.toolbar[0]&&"bottom"!==v.toolbar[1]&&(u+=X(o.uDiv).outerHeight()),o.fhDiv=X("<div style='position:absolute;overflow:hidden;"+("rtl"===v.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+u+"px;height:"+h+"px;' class='"+ee.call(r,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),o.fbDiv=X("<div style='position:absolute;overflow:hidden;"+("rtl"===v.direction?"right:0;":"left:0;")+"top:"+(parseInt(u,10)+parseInt(h,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),X(v.gView).append(o.fhDiv);var p=X(".ui-jqgrid-htable",v.gView).clone(!0),f=p[0].tHead.rows;if(v.groupHeader){X(f[0].cells).filter(":gt("+l+")").remove(),X(f).filter(".jqg-third-row-header").each(function(){X(this).children("th[id]").each(function(){var e,t=X(this).attr("id");t&&t.substr(0,r.id.length+1)===r.id+"_"&&(e=t.substr(r.id.length+1),v.iColByName[e]>l&&X(this).remove())})});var m,g=-1,y=-1;X(f).filter(".jqg-second-row-header").children("th").each(function(){if(m=parseInt(X(this).attr("colspan")||1,10),1<parseInt(X(this).attr("rowspan")||1,10)?(g++,y++):m&&(g+=m,y++),g===l)return!1}),g!==l&&(y=l),X(f).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){X(this).children(":gt("+y+")").remove()})}else X(f).each(function(){X(this).children(":gt("+l+")").remove()});if(X(p).width(1),X(o.fhDiv).append(p).scroll(function(){this.scrollLeft=0}),v.footerrow){var w=X(".ui-jqgrid-bdiv",v.gView).height();o.fsDiv=X("<div style='position:absolute;"+("rtl"===v.direction?"right:0;":"left:0;")+"top:"+(parseInt(u,10)+parseInt(h,10)+parseInt(w,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),X(v.gView).append(o.fsDiv);var C=X(".ui-jqgrid-ftable",v.gView).clone(!0);X("tr",C).each(function(){X("td:gt("+l+")",this).remove()}),X(C).width(1),X(o.fsDiv).append(C)}X(v.gView).append(o.fbDiv),X(o.bDiv).scroll(function(){X(o.fbDiv).scrollTop(X(this).scrollTop())}),X(o.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(e){o.bDiv.scrollTop+=X.isFunction(z.mouseWheel)?z.mouseWheel.call(r,e):"mousewheel"===e.type?-e.originalEvent.wheelDelta/10:6*e.originalEvent.detail}),!0===v.hoverrows&&X(v.idSel).off("mouseover.jqGrid mouseout.jqGrid");var q=function(e,t){var r=e.height();1<=Math.abs(r-t)&&0<t&&(e.height(t),r=e.height(),1<=Math.abs(t-r)&&e.height(t+Math.round(t-r)))},j=function(e,t){var r=e.width();1<=Math.abs(r-t)&&(e.width(t),r=e.width(),1<=Math.abs(t-r)&&e.width(t+Math.round(t-r)))},D=function(e,t,r,a){var i,o,l,s,n,d,c,u,h,p,f,m,g=X(t).position().top;if(null!=e&&0<e.length){if(e[0].scrollTop=t.scrollTop,e.css("rtl"===v.direction?{top:g,right:0}:{top:g,left:0}),l=e.children("table").children("thead").children("tr"),0===(s=X(t).children("div").children("table").children("thead").children("tr")).length&&0<e.children("table").length&&(l=X(e.children("table")[0].rows),s=X(X(t).children("div").children("table")[0].rows)),p=0<(o=Math.min(l.length,s.length))?X(l[0]).position().top:0,f=0<o?X(s[0]).position().top:0,0<=r)for(0<=a&&(o=Math.min(a+1,o)),i=r;i<o;i++)if("none"!==(n=X(s[i])).css("display")&&n.is(":visible")){if(g=n.position().top,c=(d=X(l[i])).position().top,u=n.height(),null!=v.groupHeader&&v.groupHeader.useColSpanStyle)for(m=n[0].cells,b=0;b<m.length;b++)null!=(h=m[b])&&"TH"===h.nodeName.toUpperCase()&&(u=Math.max(u,X(h).height()));q(d,u+(g-f)+(p-c))}q(e,t.clientHeight)}},x={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},G={header:x,resizeFooter:!0,body:x};i.on("jqGridAfterGridComplete.setFrozenColumns",function(){X(v.idSel+"_frozen").remove(),X(o.fbDiv).height(o.hDiv.clientHeight);var e=X(this).clone(!0),t=e[0].rows,r=i[0].rows;if(X(t).filter("tr[role=row]").each(function(){X(this.cells).filter("td[role=gridcell]:gt("+l+")").remove()}),o.fbRows=t,e.width(1).attr("id",v.id+"_frozen"),e.appendTo(o.fbDiv),!0===v.hoverrows){var a=function(e,t,r){X(e)[t](c),X(r[e.rowIndex])[t](c)};X(t).filter(".jqgrow").hover(function(){a(this,"addClass",r)},function(){a(this,"removeClass",r)}),X(r).filter(".jqgrow").hover(function(){a(this,"addClass",t)},function(){a(this,"removeClass",t)})}D(o.fhDiv,o.hDiv,0,-1),D(o.fbDiv,o.bDiv,0,-1),o.sDiv&&D(o.fsDiv,o.sDiv,0,-1)});var S=function(e){X(o.fbDiv).scrollTop(X(o.bDiv).scrollTop()),e.header.resizeDiv&&D(o.fhDiv,o.hDiv,e.header.resizedRows.iRowStart,e.header.resizedRows.iRowEnd),e.body.resizeDiv&&D(o.fbDiv,o.bDiv,e.body.resizedRows.iRowStart,e.body.resizedRows.iRowEnd),e.resizeFooter&&o.sDiv&&e.resizeFooter&&D(o.fsDiv,o.sDiv,0,-1);var t=o.fhDiv[0].clientWidth;e.header.resizeDiv&&null!=o.fhDiv&&1<=o.fhDiv.length&&q(X(o.fhDiv),o.hDiv.clientHeight),e.body.resizeDiv&&null!=o.fbDiv&&0<o.fbDiv.length&&j(X(o.fbDiv),t),e.resizeFooter&&null!=o.fsDiv&&0<=o.fsDiv.length&&j(X(o.fsDiv),t)};X(v.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){S(G)},50)}),i.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(e,t){var r=i.jqGrid("getInd",t);S({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:r,iRowEnd:r}}})}),i.on("jqGridResizeStop.setFrozenColumns",function(){S(G)}),i.on("jqGridResetFrozenHeights.setFrozenColumns",function(e,t){S(t||G)}),o.hDiv.loading||setTimeout(function(){i.triggerHandler("jqGridAfterGridComplete")},0),v.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var e=X(this),t=this.grid,r=this.p,a=Z(r.id);if(t&&!0===r.frozenColumns){if(X(t.fhDiv).remove(),X(t.fbDiv).off(".setFrozenColumns"),X(t.fbDiv).remove(),t.fhDiv=null,t.fbDiv=null,t.fbRows=null,r.footerrow&&(X(t.fsDiv).remove(),t.fsDiv=null),e.off(".setFrozenColumns"),!0===r.hoverrows){var i,o=ee.call(this,"states.hover");e.on("mouseover.jqGrid",function(e){i=X(e.target).closest("tr.jqgrow"),"ui-subgrid"!==X(i).attr("class")&&X(i).addClass(o)}).on("mouseout.jqGrid",function(e){i=X(e.target).closest("tr.jqgrow"),X(i).removeClass(o)})}if(r.frozenColumns=!1,r.sortable){var l=X(t.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");l.sortable("destroy"),e.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+a+"_cb,#jqgh_"+a+"_rn,#jqgh_"+a+"_subgrid),:hidden)"}}}),e.jqGrid("sortableColumns",l)}}})}})});
//# sourceMappingURL=grid.custom.js.map